'use client'
import { useRouter } from "next/navigation";
import { useEffect, useState } from "react";

const PaymentHome = () => {
  const router:any = useRouter()
  const params = router.query
  const [ssoToken, setSSOToken] = useState("")

const tempToken = `EB1242E357327423EAB27C5C8834C3E871283D0E804E9EB8FF44E302DE9D34AF9B3D368C3B015515D2CC04AC80FC382D6E7E189C08058E07C9BD56BC4541275D0EFA355DE6A665CC4C44B4D674832525CD45B1EA84F467E42DDE791BE6CE50C0C88D875FE1481A0794F7FF31770D18724D4EDB743D506B001801DC4565E564C63EF6D4E390E3EBE9D783BB59EFB78B70653DFABB6974801780330B67536A6A51D559B7BAEDF12CF5CF558065F9ADFA324D1959286BFEBCB69D9C51D54FA59E45F4BB88DC81F167CA42A39E877B763800AEFA3F1E0DDF76D0A082B06639D2DE16CEF3189CB5931F87DBC0847DB33017BC6A265846184C572705032B5A44380E2C61F8FF7AE13BE6FD4A72CE32C4CFC56616590F3291B7029825F3C55D33BDC678EF7D6DC857F9C735D48B3100C3E0D07E91A05FE25B0BDF137DC7CC3C2C4D3F04758286B002C76CB85DBECE15E07F2CA3DA73704BA73EAE8FA31B77C05894A6C115E348ACEABEF36694BBBBDC7DA5146A2E6E513E9C568984E59BCE6D23399DBF1D9E3D22C34D3B2D6652BF7DBE3C97F7BC1C504AC036C4F97B5B3900976E3B67006C1D03CDACF31B5EDBC0937C49982DC9C06C51A6929DAC966DFEA997BF7D87EFEB10D7CCCCA6AD6027883913D168FF88A63F2EB0FDEC801783DC5C3B18C5F7835DECDFE1917412D9155EE665603E8A0C415B32AE1ADB13E1DF370F73BFB4F`

useEffect(()=>{
  handleReview()
},[])

const handleReview=async()=>{
  const bodyData = {
    firstName: "Test865",
    middleName: "User56t45",
    lastName: "Use546456r",
    email: "testuser8786@maildrop.cc",
    addressLine1: "441",
    addressLine2: "4th street",
    city: "Washington",
    state: "DC",
    zipcode: "20500",
    phone: "+19195959595",
    accountNumber: "0339685747896",
    amount: 1.0,
    paymentTypeCode: "TEST_PAYMENT",
    externalReferenceNumber: "PRN0002",
    pmList: "TEST_PM_LIST",
    timestamp: 1705590892000
  }
    try{
      const res = await fetch('http://localhost:8081/payment/sso-token', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(bodyData)
      }).then((data)=>data.json()).then((data)=>{
        setSSOToken(data?.token)
      })
    }catch(e){
      console.log(":::::::::::::::::::::::::::::::::::::::", e)
      console.error(e)
    }
}


  return (
    <div className='!h-screen !w-full'>
      <h1 className="w-fit h-fit text-lg m-auto font-[600] my-4">Localhost:3000</h1>
      <iframe
        title='pay'
        key={"payment"}
        id="paymentUs"
        className='w-full h-full'
        src={`https://secure4.paymentus.com/rotp/dcsa?itok=${ssoToken}`}
        // src="https://cdn.shopify.com/s/files/1/1830/5085/products/VE0007_BCAA_Capsule_90ct_2048x2048.png?v=1494855182"
        // src={tempToken}
        sandbox="allow-same-origin allow-scripts"
        />
        <p className="text-md font-[600] my-4">{`https://secure4.paymentus.com/rotp/dcsa?itok=${tempToken}`}</p>
    </div>
  );
};


// http://dev01.acquaa.com/payment?ssoToken=5EB1242E357327423EAB27C5C8834C3E871283D0E804E9EB8FF44E302DE9D34AF9B3D368C3B015515D2CC04AC80FC382D6E7E189C08058E07C9BD56BC4541275D0EFA355DE6A665CC4C44B4D674832525CD45B1EA84F467E42DDE791BE6CE50C0C88D875FE1481A0794F7FF31770D18724D4EDB743D506B001801DC4565E564C63EF6D4E390E3EBE9D783BB59EFB78B70653DFABB6974801780330B67536A6A51D559B7BAEDF12CF5CF558065F9ADFA324D1959286BFEBCB69D9C51D54FA59E45F4BB88DC81F167CA42A39E877B763800AEFA3F1E0DDF76D0A082B06639D2DE16CEF3189CB5931F87DBC0847DB33017BC6A265846184C572705032B5A44380E2C61F8FF7AE13BE6FD4A72CE32C4CFC56616590F3291B7029825F3C55D33BDC678EF7D6DC857F9C735D48B3100C3E0D07E91A05FE25B0BDF137DC7CC3C2C4D3F04758286B002C76CB85DBECE15E07F2CA3DA73704BA73EAE8FA31B77C05894A6C115E348ACEABEF36694BBBBDC7DA5146A2E6E513E9C568984E59BCE6D23399DBF1D9E3D22C34D3B2D6652BF7DBE3C97F7BC1C504AC036C4F97B5B3900976E3B67006C1D03CDACF31B5EDBC0937C49982DC9C06C51A6929DAC966DFEA997BF7D87EFEB10D7CCCCA6AD6027883913D168FF88A63F2EB0FDEC801783DC5C3B18C5F7835DECDFE1917412D9155EE665603E8A0C415B32AE1ADB13E1DF370F73BFB4F

// PaymentHome.getLayout = function getLayout(page) {
//   return <Layout>{page}</Layout>;
// };

export default PaymentHome;



